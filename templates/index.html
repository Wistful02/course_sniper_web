<!DOCTYPE html>
<html>

<head>
  <title>Sussy Testing Website</title>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.js"></script>
</head>

<body>
  <h1>Zav's Course Sniper</h1>

  <div class="navbar">
    <a href="/">Index Sniping</a>
    <a href="/course_snipe">Course Number Sniping</a>
  </div>

  <div class="simple-container">
    <h1 class="title">Index Snipe</h1>
    <form action="/process" method="POST">
      <label for="input" class="label">Enter Text:</label>
      <input type="text" id="input" name="input" class="input" required>
      <br>
      <input type="submit" value="Submit" class="button">
    </form>


    <h3 id="status_bar" class="status">{{status}}</h3>

    <div id="Buttons">
      <div style="float: left;">
        <button id="start_snipe_button" type="submit" class="button"> start sniping! </button>
      </div>
      <div style="float: left;">
        <form action="/clear_list" method="POST">
          <button type="submit">Clear List</button>
        </form>
      </div>
      <div style="float: left;">
        <form action="/stop_sniper" method="POST">
          <button type="submit">Stop</button>
        </form>
      </div>
    </div>
    <br>

    <h2 class="title">Course Indexes:</h2>
    <ul class="input-list">
      {% for item in stored_inputs %}
      <li>{{ item }}</li>
      {% endfor %}
    </ul>

    <h2 class="title">Sniper Updates</h2>
    <ul id="input_list"></ul>
  </div>
  <script>
    var socket = io({
      host: 'localhost',
      port: 5000
    });

    socket.on('connect', function () {
      console.log('Connected to server');
    });

    socket.on('sex_with_andrewmama', function (message) {
      console.log("response received");
      console.log(message);

      var messageList = document.getElementById('input_list');
      messageList.innerHTML = ''; // Clear the existing content

      for (var i = 0; i < message.length; i++) {
        var listItem = document.createElement('li');
        listItem.textContent = message[i];
        messageList.appendChild(listItem);
      }
    });

    document.getElementById('start_snipe_button').addEventListener('click', function () {
      document.getElementById('status_bar').innerHTML = 'Starting Sniper...';
      socket.emit('start_sniper');
      console.log('Starting_sniper')
    });
  </script>
</body>

</html>
